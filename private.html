<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow">
    <title>Password Protected Page</title>
    <style>
        html, body {
            margin: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, Helvetica, sans-serif;
        }
        #dialogText {
            color: white;
            background-color: #333333;
        }
        
        #dialogWrap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: table;
            background-color: #EEEEEE;
        }
        
        #dialogWrapCell {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
        }
        
        #mainDialog {
            max-width: 400px;
            margin: 5px;
            border: solid #AAAAAA 1px;
            border-radius: 10px;
            box-shadow: 3px 3px 5px 3px #AAAAAA;
            margin-left: auto;
            margin-right: auto;
            background-color: #FFFFFF;
            overflow: hidden;
            text-align: left;
        }
        #mainDialog > * {
            padding: 10px 30px;
        }
        #passArea {
            padding: 20px 30px;
            background-color: white;
        }
        #passArea > * {
            margin: 5px auto;
        }
        #pass {
            width: 100%;
            height: 40px;
            font-size: 30px;
        }
        
        #messageWrapper {
            float: left;
            vertical-align: middle;
            line-height: 30px;
        }
        
        .notifyText {
            display: none;
        }
        
        #invalidPass {
            color: red;
        }
        
        #success {
            color: green;
        }
        
        #submitPass {
            font-size: 20px;
            border-radius: 5px;
            background-color: #E7E7E7;
            border: solid gray 1px;
            float: right;
            cursor: pointer;
        }
        #contentFrame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        #attribution {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            text-align: center;
            padding: 10px;
            font-weight: bold;
            font-size: 0.8em;
        }
        #attribution, #attribution a {
            color: #999;
        }
        .error {
            display: none;
            color: red;
        }
    </style>
  </head>
  <body>
         <div class="Header"> 
         <div id="mySidenav" class="sidenav"> 
   <a href="javascript:void(0)" onclick="closeNav()">&times;</a> 
   <a href="">Home</a> 
   <a href="Https://WheatleyCraft.ml/members">Members</a> 
   <a href="https://wheatleycraft.ml/contact-us">Contact us</a> 
   <a href="https://wheatleycraft.ml/games">Games</a> 
                 <a href="https://wheatleycraft.ml/private">Private Page</a> 
   <h3><u>Seasons</u></h3> 
   <a href="Https://WheatleyCraft.ml/season-1">Season 1</a> 
   </div> 
  
 <!-- Use any element to open the sidenav --> 
 <span onclick="openNav()"><img src="Menu-Hamburger.png" alt="menu" border="0" style="width:5%;"></a></span> 
  
 <script> 
 function openNav() { 
   document.getElementById("mySidenav").style.width = "250px"; 
 } 
  
 function closeNav() { 
   document.getElementById("mySidenav").style.width = "0"; 
 } 
 </script> 
 <script> 
 < dropdown.length; i++) { 
   dropdown[i].addEventListener("click", function() { 
     this.classList.toggle("active"); 
     var dropdownContent = this.nextElementSibling; 
     if (dropdownContent.style.display === "block") { 
       dropdownContent.style.display = "none"; 
     } else { 
       dropdownContent.style.display = "block"; 
     } 
   }); 
 }</script> 
                   <div align="center"><img src="WheatleyCraftLogo.png" alt="Wheatley-Craftext" border="0" style="width:90%;"></div> 
         </div>
 <iframe SRC="web.whatsapp.com"></iframe>
    <div id="dialogWrap">
        <div id="dialogWrapCell">
            <div id="mainDialog">
                <div id="dialogText">This page is password protected.</div>
                <div id="passArea">
                    <p id="passwordPrompt">Password</p>
                    <input id="pass" type="password" name="pass" autofocus>
                    <div>
                        <span id="messageWrapper">
                            <span id="invalidPass" class="error">Sorry, please try again.</span>
                            <span id="trycatcherror" class="error">Sorry, something went wrong.</span>
                            <span id="success" class="notifyText">Success!</span>
                            &nbsp;
                        </span>
                        <button id="submitPass" type="button">Submit</button>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                <div id="securecontext" class="error">
                    <p>
                        Sorry, but password protection only works over a secure connection. Please load this page via HTTPS.
                    </p>
                </div>
                <div id="nocrypto" class="error">
                    <p>
                        Your web browser appears to be outdated. Please visit this page using a modern browser.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="attribution">
       
    </div>
    <script>
    (function() {

        var pl = "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";
        
        var submitPass = document.getElementById('submitPass');
        var passEl = document.getElementById('pass');
        var invalidPassEl = document.getElementById('invalidPass');
        var trycatcherror = document.getElementById('trycatcherror');
        var successEl = document.getElementById('success');
        var contentFrame = document.getElementById('contentFrame');
        
        // Sanity checks

        if (pl === "") {
            submitPass.disabled = true;
            passEl.disabled = true;
            alert("This page is meant to be used with the encryption tool. It doesn't work standalone.");
            return;
        }

        if (!isSecureContext) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#securecontext").style.display = "block";
            return;
        }

        if (!crypto.subtle) {
            document.querySelector("#passArea").style.display = "none";
            document.querySelector("#nocrypto").style.display = "block";
            return;
        }
        
        function str2ab(str) {
            var ustr = atob(str);
            var buf = new ArrayBuffer(ustr.length);
            var bufView = new Uint8Array(buf);
            for (var i=0, strLen=ustr.length; i < strLen; i++) {
                bufView[i] = ustr.charCodeAt(i);
            }
            return bufView;
        }

        async function deriveKey(salt, password) {
            const encoder = new TextEncoder()
            const baseKey = await crypto.subtle.importKey(
                'raw',
                encoder.encode(password),
                'PBKDF2',
                false,
                ['deriveKey'],
            )
            return await crypto.subtle.deriveKey(
                { name: 'PBKDF2', salt, iterations: 100000, hash: 'SHA-256' },
                baseKey,
                { name: 'AES-GCM', length: 256 },
                true,
                ['decrypt'],
            )
        }
        
        async function doSubmit(evt) {
            submitPass.disabled = true;
            passEl.disabled = true;

            let iv, ciphertext, key;
            
            try {
                var unencodedPl = str2ab(pl);

                const salt = unencodedPl.slice(0, 32)
                iv = unencodedPl.slice(32, 32 + 16)
                ciphertext = unencodedPl.slice(32 + 16)

                key = await deriveKey(salt, passEl.value);
            } catch (e) {
                trycatcherror.style.display = "inline";
                console.error(e);
                return;
            }

            try {
                const decryptedArray = new Uint8Array(
                    await crypto.subtle.decrypt({ name: 'AES-GCM', iv }, key, ciphertext)
                );

                let decrypted = new TextDecoder().decode(decryptedArray);

                if (decrypted === "") throw "No data returned";

                const basestr = '<base href="." target="_top">';
                const anchorfixstr = `
                    <script>
                        Array.from(document.links).forEach((anchor) => {
                            const href = anchor.getAttribute("href");
                            if (href.startsWith("#")) {
                                anchor.addEventListener("click", function(e) {
                                    e.preventDefault();
                                    const targetId = this.getAttribute("href").substring(1);
                                    const targetEl = document.getElementById(targetId);
                                    targetEl.scrollIntoView();
                                });
                            }
                        });
                    <\/script>
                `;
                
                // Set default iframe link targets to _top so all links break out of the iframe
                if (decrypted.includes("<head>")) decrypted = decrypted.replace("<head>", "<head>" + basestr);
                else if (decrypted.includes("<!DOCTYPE html>")) decrypted = decrypted.replace("<!DOCTYPE html>", "<!DOCTYPE html>" + basestr);
                else decrypted = basestr + decrypted;

                // Fix fragment links
                if (decrypted.includes("</body>")) decrypted = decrypted.replace("</body>", anchorfixstr + '</body>');
                else if (decrypted.includes("</html>")) decrypted = decrypted.replace("</html>", anchorfixstr + '</html>');
                else decrypted = decrypted + anchorfixstr;
                
                contentFrame.srcdoc = decrypted;
                
                successEl.style.display = "inline";
                setTimeout(function() {
                    dialogWrap.style.display = "none";
                }, 1000);
            } catch (e) {
                invalidPassEl.style.display = "inline";
                passEl.value = "";
                submitPass.disabled = false;
                passEl.disabled = false;
                console.error(e);
                return;
            }
        }
        
        submitPass.onclick = doSubmit;
        passEl.onkeypress = function(e){
            if (!e) e = window.event;
            var keyCode = e.keyCode || e.which;
            invalidPassEl.style.display = "none";
            if (keyCode == '13'){
              // Enter pressed
              doSubmit();
              return false;
            }
        }
    })();
    </script>
  </body>
</html>
